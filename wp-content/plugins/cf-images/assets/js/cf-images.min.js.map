{"version":3,"file":"cf-images.min.js","mappings":"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","sources":["webpack://cf-images/./assets/_src/js/helpers/modal.js","webpack://cf-images/./assets/_src/js/helpers/notice.js","webpack://cf-images/./assets/_src/js/helpers/post.js","webpack://cf-images/./assets/_src/js/modules/image-ai.js","webpack://cf-images/./assets/_src/js/app.js"],"sourcesContent":["/**\n * Modal\n */\n\n// Config\nlet visibleModal = null;\n\n// Toggle modal\nexport const toggleModal = ( event ) => {\n\tevent.preventDefault();\n\tconst modal = document.getElementById( event.currentTarget.getAttribute( 'data-target' ) );\n\tif ( 'undefined' !== typeof ( modal ) && modal !== null && isModalOpen( modal ) ) {\n\t\tcloseModal( modal );\n\t} else {\n\t\topenModal( modal );\n\t}\n};\nwindow.cfToggleModal = toggleModal;\n\n// Is modal open\nconst isModalOpen = ( modal ) => {\n\treturn modal.hasAttribute( 'open' ) && modal.getAttribute( 'open' ) !== 'false';\n};\n\n// Open modal\nconst openModal = ( modal ) => {\n\tif ( isScrollbarVisible() ) {\n\t\tdocument.documentElement.style.setProperty( '--scrollbar-width', `${ getScrollbarWidth() }px` );\n\t}\n\tsetTimeout( () => {\n\t\tvisibleModal = modal;\n\t}, 10 );\n\tmodal.setAttribute( 'open', true );\n};\n\n// Close modal\nconst closeModal = ( modal ) => {\n\tvisibleModal = null;\n\tdocument.documentElement.style.removeProperty( '--scrollbar-width' );\n\tsetTimeout( () => {\n\t\tmodal.removeAttribute( 'open' );\n\t}, 10 );\n};\n\n// Close with a click outside\ndocument.addEventListener( 'click', ( event ) => {\n\tif ( visibleModal !== null ) {\n\t\tconst modalContent = visibleModal.querySelector( 'article' );\n\t\tconst isClickInside = modalContent.contains( event.target );\n\t\tif ( ! isClickInside ) {\n\t\t\tcloseModal( visibleModal );\n\t\t}\n\t}\n} );\n\n// Close with Esc key\ndocument.addEventListener( 'keydown', ( event ) => {\n\tif ( event.key === 'Escape' && visibleModal !== null ) {\n\t\tcloseModal( visibleModal );\n\t}\n} );\n\n// Get scrollbar width\nconst getScrollbarWidth = () => {\n\t// Creating invisible container\n\tconst outer = document.createElement( 'div' );\n\touter.style.visibility = 'hidden';\n\touter.style.overflow = 'scroll'; // forcing scrollbar to appear\n\touter.style.msOverflowStyle = 'scrollbar'; // needed for WinJS apps\n\tdocument.body.appendChild( outer );\n\n\t// Creating inner element and placing it in the container\n\tconst inner = document.createElement( 'div' );\n\touter.appendChild( inner );\n\n\t// Calculating difference between container's full width and the child width\n\tconst scrollbarWidth = ( outer.offsetWidth - inner.offsetWidth );\n\n\t// Removing temporary elements from the DOM\n\touter.parentNode.removeChild( outer );\n\n\treturn scrollbarWidth;\n};\n\n// Is scrollbar visible\nconst isScrollbarVisible = () => {\n\treturn document.body.scrollHeight > screen.height;\n};\n","/**\n * Show a notice.\n *\n * @since 1.0.0\n * @param {string} message Message text.\n * @param {string} type    Notice type.\n */\nexport const showNotice = function( message, type = 'success' ) {\n\tconst notice = jQuery( '#cf-images-ajax-notice' );\n\n\tnotice.addClass( 'notice-' + type );\n\tnotice.find( 'p' ).html( message );\n\n\tnotice.slideDown().delay( 5000 ).queue( function() {\n\t\tjQuery( this ).slideUp( 'slow', function() {\n\t\t\tjQuery( this ).removeClass( 'notice-' + type );\n\t\t\tjQuery( this ).find( 'p' ).html( '' );\n\t\t} );\n\t\tjQuery.dequeue( this );\n\t} );\n};\n","/* global CFImages */\n/* global ajaxurl */\n\n/**\n * Do AJAX request to WordPress.\n *\n * @since 1.0.0\n * @param {string} action Registered AJAX action.\n * @param {Object} data   Additional data that needs to be passed in POST request.\n * @return {Promise<unknown>} Return data.\n */\nexport const post = function( action, data = {} ) {\n\tdata = { _ajax_nonce: CFImages.nonce, action, data };\n\n\treturn new Promise( ( resolve, reject ) => {\n\t\tjQuery.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdata,\n\t\t\tsuccess( response ) {\n\t\t\t\tresolve( response );\n\t\t\t},\n\t\t\terror( error ) {\n\t\t\t\treject( error );\n\t\t\t},\n\t\t} );\n\t} );\n};\n","/* global CFImages */\n\nimport { showNotice } from '../helpers/notice';\nimport { post } from '../helpers/post';\n\n( function( $ ) {\n\t'use strict';\n\n\t// Toggle settings on/off.\n\t$( '#image_ai' ).on( 'change', ( e ) => $( '.cf-images-ai-settings' ).toggle( e.target.checked ) );\n\n\t// Disconnect from Image AI.\n\t$( '#image-ai-disconnect' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\n\t\tpost( 'cf_images_ai_disconnect' )\n\t\t\t.then( () => window.location.search += '&saved=true' )\n\t\t\t.catch( window.console.log );\n\t} );\n\n\t// Login.\n\t$( '#image-ai-login' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\t\tconst { login, savingChanges } = CFImages.strings;\n\n\t\t$( this ).attr( 'aria-busy', true ).html( savingChanges );\n\n\t\tconst args = {\n\t\t\temail: $( '#cf-ai-email-address' ).val(),\n\t\t\tpassword: $( '#cf-ai-password' ).val(),\n\t\t};\n\n\t\tpost( 'cf_images_ai_login', args )\n\t\t\t.then( ( response ) => {\n\t\t\t\t$( this ).attr( 'aria-busy', false ).html( login );\n\t\t\t\tif ( ! response.success && 'undefined' !== typeof response.data ) {\n\t\t\t\t\tshowNotice( response.data, 'error' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twindow.location.search += '&login=true';\n\t\t\t} )\n\t\t\t.catch( window.console.log );\n\t} );\n}( jQuery ) );\n","/**\n * Main JavaScript file.\n *\n * @author Anton Vanyukov <a.vanyukov@vcore.ru>\n * @since 1.0.0\n */\n\n/* global CFImages */\n\nimport '../css/app.scss';\nimport { toggleModal } from './helpers/modal';\nimport { showNotice } from './helpers/notice';\nimport { post } from './helpers/post';\nimport './modules/image-ai.js';\n\n( function( $ ) {\n\t'use strict';\n\n\t/**\n\t * Available forms.\n\t *\n\t * Form ID corresponds to `data-type` value on a form, value is the AJAX callback.\n\t *\n\t * @since 1.0.0\n\t * @type {{settings: string, setup: string}}\n\t */\n\tconst forms = {\n\t\tsettings: 'cf_images_save_settings',\n\t\tsetup: 'cf_images_do_setup'\n\t};\n\n\t/**\n\t * List of ajaxActions.\n\t * The first parameter is the Ajax callback, the second is which element to map the click event to.\n\t *\n\t * @since 1.2.1\n\t */\n\tconst ajaxActions = {\n\t\tcf_images_offload_image: '.cf-images-offload', // Process offloading from media library.\n\t\tcf_images_skip_image: '.cf-images-skip', // Skip image from processing.\n\t\tcf_images_undo_image: '.cf-images-undo', // Process undo offloading from media library.\n\t\tcf_images_delete_image: '.cf-images-delete', // Process remove image action from media library.\n\t\tcf_images_restore_image: '.cf-images-restore', // Download image back to media library.\n\t\tcf_images_ai_caption: '.cf-images-ai-alt', // Process AI caption.\n\t};\n\n\t/**\n\t * Auto hide any pending notices.\n\t *\n\t * @since 1.0.0\n\t */\n\t$( document ).ready( function() {\n\t\tsetTimeout( () => $( '#cf-images-notice' ).slideUp( 'slow' ), 5000 );\n\t} );\n\n\t/**\n\t * Process form submits.\n\t *\n\t * Currently, processes the setup and settings forms.\n\t *\n\t * @since 1.0.0\n\t */\n\t$( '#save-settings' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\n\t\tconst form = $( 'form#cf-images-form' );\n\t\tconst action = forms[ form.data( 'type' ) ];\n\n\t\tif ( undefined === action ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { inProgress, saveChange } = CFImages.strings;\n\n\t\t$( this )\n\t\t\t.attr( 'aria-busy', true )\n\t\t\t.html( inProgress + '...' );\n\n\t\tpost( action, form.serialize() )\n\t\t\t.then( ( response ) => {\n\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t$( this )\n\t\t\t\t\t\t.attr( 'aria-busy', false )\n\t\t\t\t\t\t.html( saveChange );\n\n\t\t\t\t\tif ( 'undefined' !== typeof response.data ) {\n\t\t\t\t\t\tshowNotice( response.data, 'error' );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twindow.location.search += '&saved=true';\n\t\t\t} )\n\t\t\t.catch( window.console.log );\n\t} );\n\n\t/**\n\t * Upload all images to Cloudflare.\n\t *\n\t * @since 1.0.0\n\t */\n\t$( '#cf-images-upload-all' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\n\t\t$( '.media_page_cf-images [role=button]' ).attr( 'disabled', true );\n\t\trunProgressBar( 'upload' );\n\t} );\n\n\t/**\n\t * Remove all images from Cloudflare.\n\t *\n\t * @since 1.0.0\n\t */\n\t$( '#cf-images-remove-all' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\n\t\ttoggleModal( e );\n\t\t$( '.media_page_cf-images form#cf-images-form [role=button]' ).attr( 'disabled', true );\n\n\t\trunProgressBar( 'remove' );\n\t} );\n\n\t/**\n\t * Show confirm modal.\n\t *\n\t * @since 1.2.0\n\t */\n\t$( '#cf-images-show-modal' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\t\ttoggleModal( e );\n\t} );\n\n\t/**\n\t * Disconnect from Cloudflare.\n\t *\n\t * @since 1.1.2\n\t */\n\t$( '#cf-images-disconnect' ).on( 'click', function( e ) {\n\t\te.preventDefault();\n\n\t\tconst { disconnecting } = CFImages.strings;\n\n\t\t$( this ).attr( 'aria-busy', true ).html( disconnecting );\n\t\tpost( 'cf_images_disconnect' )\n\t\t\t.then( () => window.location.reload() )\n\t\t\t.catch( window.console.log );\n\t} );\n\n\t/**\n\t * Toggle custom domain input.\n\t *\n\t * @since 1.1.2\n\t */\n\t$( '#custom_domain' ).on( 'change', function( e ) {\n\t\t$( 'input[name=\"custom_domain_input\"]' ).toggleClass( 'hidden', ! e.target.checked );\n\t} );\n\n\t/**\n\t * Run progress bar (remove or upload all images).\n\t *\n\t * @since 1.0.0\n\t * @param {string} action      AJAX action.\n\t * @param {number} currentStep Current step.\n\t * @param {number} totalSteps  Total steps.\n\t * @param {number} progress    Progress in percent.\n\t */\n\tconst runProgressBar = function( action, currentStep = 0, totalSteps = 0, progress = 0 ) {\n\t\t$( '.cf-images-progress.' + action ).show();\n\t\t$( '.cf-images-progress.' + action + ' > progress' ).val( progress );\n\n\t\tconst args = {\n\t\t\tcurrentStep,\n\t\t\ttotalSteps,\n\t\t\taction\n\t\t};\n\n\t\tpost( 'cf_images_bulk_process', args )\n\t\t\t.then( ( response ) => {\n\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t$( '.cf-images-progress.' + action ).hide();\n\t\t\t\t\t$( '.media_page_cf-images [role=button]' ).attr( 'disabled', false );\n\t\t\t\t\tshowNotice( response.data, 'error' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tprogress = Math.round( 100 / response.data.totalSteps * response.data.currentStep );\n\t\t\t\t$( '.cf-images-progress.' + action + ' > progress' ).val( progress );\n\t\t\t\t$( '.cf-images-progress.' + action + ' > p > small' ).html( response.data.status );\n\n\t\t\t\tif ( response.data.currentStep < response.data.totalSteps ) {\n\t\t\t\t\trunProgressBar( action, response.data.currentStep, response.data.totalSteps, progress );\n\t\t\t\t} else if ( 'upload' === action ) {\n\t\t\t\t\twindow.location.search += '&updated=true';\n\t\t\t\t} else {\n\t\t\t\t\twindow.location.search += '&deleted=true';\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( window.console.log );\n\t};\n\n\t/**\n\t * Register Ajax actions.\n\t */\n\tObject.keys( ajaxActions ).forEach( ( action ) => {\n\t\t$( document ).on( 'click', ajaxActions[ action ], function( e ) {\n\t\t\te.preventDefault();\n\n\t\t\tconst { inProgress, offloadError } = CFImages.strings;\n\n\t\t\tconst divStatus = $( this ).closest( '.cf-images-status' );\n\t\t\tdivStatus.html( inProgress + '<span class=\"spinner is-active\"></span>' );\n\n\t\t\tpost( action, $( this ).data( 'id' ) )\n\t\t\t\t.then( ( response ) => {\n\t\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t\tconst message = response.data || offloadError;\n\t\t\t\t\t\tdivStatus.html( message );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdivStatus.html( response.data );\n\t\t\t\t} )\n\t\t\t\t.catch( window.console.log );\n\t\t} );\n\t} );\n\n\t/**\n\t * Hide the sidebar.\n\t *\n\t * @since 1.3.0\n\t */\n\t$( document ).on( 'click', '#hide-the-sidebar', () => {\n\t\tpost( 'cf_images_hide_sidebar' ).catch( window.console.log );\n\t\t$( '.cf-images-sidebar' ).slideUp( 'slow', function() {\n\t\t\t$( this ).remove();\n\t\t} );\n\t} );\n}( jQuery ) );\n"],"names":["visibleModal","toggleModal","event","preventDefault","modal","document","getElementById","currentTarget","getAttribute","isModalOpen","closeModal","openModal","window","cfToggleModal","hasAttribute","isScrollbarVisible","documentElement","style","setProperty","getScrollbarWidth","setTimeout","setAttribute","removeProperty","removeAttribute","addEventListener","querySelector","contains","target","key","outer","createElement","visibility","overflow","msOverflowStyle","body","appendChild","inner","scrollbarWidth","offsetWidth","parentNode","removeChild","scrollHeight","screen","height","showNotice","message","type","notice","jQuery","addClass","find","html","slideDown","delay","queue","this","slideUp","removeClass","dequeue","post","action","data","_ajax_nonce","CFImages","nonce","Promise","resolve","reject","ajax","url","ajaxurl","success","response","error","$","on","e","toggle","checked","then","location","search","catch","console","log","login","savingChanges","strings","attr","args","email","val","password","forms","settings","setup","ajaxActions","cf_images_offload_image","cf_images_skip_image","cf_images_undo_image","cf_images_delete_image","cf_images_restore_image","cf_images_ai_caption","ready","form","undefined","inProgress","saveChange","serialize","runProgressBar","disconnecting","reload","toggleClass","currentStep","totalSteps","progress","show","hide","Math","round","status","Object","keys","forEach","offloadError","divStatus","closest","remove"],"sourceRoot":""}